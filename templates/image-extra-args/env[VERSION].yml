# requires setting
# task env VERSION
- --pull-always
- --layers=true
- --build-arg
- MATRIX_ROOTFS=${MATRIX_ROOTFS}
- --build-arg
- MATRIX_ARCH=${MATRIX_ARCH}
- --build-arg
- VERSION=${VERSION}
- --build-arg
- DOCKERHUB_ARCH={{ .Env.MATRIX_ARCH | getDockerHubArch }}
- --build-arg
- GO_VERSION=${GO_VERSION}
- --build-arg
- PROTOC_VERSION=${PROTOC_VERSION}
{{ if eq .Env.MATRIX_ROOTFS "alpine" }}
- --build-arg
- ROOTFS_VERSION=${ALPINE_VERSION}
- --build-arg
- ROOTFS_WITH_VERSION=alpine${ALPINE_VERSION}
{{ else }}
- --build-arg
- ROOTFS_VERSION=${DEBIAN_VERSION}-slim
- --build-arg
- ROOTFS_WITH_VERSION=${DEBIAN_VERSION}-slim
{{ end }}
