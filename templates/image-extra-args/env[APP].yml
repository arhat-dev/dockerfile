# requires setting
# task env APP

- --pull-always
- --build-arg
- APP=${APP}
- --build-arg
- MATRIX_ROOTFS=${MATRIX_ROOTFS}
- --build-arg
- MATRIX_ARCH=${MATRIX_ARCH}
- --build-arg
- DOCKERHUB_ARCH={{ .Env.MATRIX_ARCH | getDockerHubArch }}
- --build-arg
- GO_VERSION=${GO_VERSION}
{{ if eq .Env.MATRIX_ROOTFS "alpine" }}
- --build-arg
# alpine
- ROOTFS_NAME=alpine
- --build-arg
# 3.13
- ROOTFS_VERSION=${ALPINE_VERSION}
- --build-arg
# alpine3.13
- ROOTFS_WITH_VERSION=alpine${ALPINE_VERSION}
{{ else }}
- --build-arg
# buster
- ROOTFS_NAME=${DEBIAN_VERSION}
- --build-arg
# buster-slim
- ROOTFS_VERSION=${DEBIAN_VERSION}-slim
- --build-arg
# buster-slim
- ROOTFS_WITH_VERSION=${DEBIAN_VERSION}-slim
{{ end }}
